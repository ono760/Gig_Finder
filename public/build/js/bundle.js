var app=angular.module("gigApp",["ui.router","ngMaterial","ngMessages","ngAnimate","btford.socket-io","pascalprecht.translate","ngCookies","ngSanitize"]);app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,o,t){o.otherwise("/"),e.state("home",{url:"/",controller:"HomeControl",templateUrl:"partials/home.html"}).state("about",{url:"/about",controller:"AboutControl",templateUrl:"partials/about.html"}).state("signup",{url:"/signup",controller:"SignUpControl",templateUrl:"partials/signup.html"}).state("whoami",{url:"/whoami",controller:"UserControl",templateUrl:"partials/whoami.html"}).state("gigposter",{url:"/gigposter",controller:"PosterControl",templateUrl:"partials/gigposter.html"}).state("gigseeker",{url:"/gigseeker",controller:"GigSeekerControl",templateUrl:"partials/gigseeker.html"}).state("signin",{url:"/signin",controller:"SignInControl",templateUrl:"partials/signin.html"}).state("/user",{url:"/user",controller:"UserControl",templateUrl:"partials/user.html"}).state("/chatroom",{url:"/chatroom",controller:"ChatRoomControl",templateUrl:"partials/chatroom.html"})}]),app.config(["$translateProvider",function(e){e.useSanitizeValueStrategy("escapeParameters"),e.translations("en",{HEADLINE:"Welcome to Gig Finder",COPYRIGHT:"Copyright © GigFinder 2016",ABOUTHEAD:"About Gig Finder",ABOUTSUBHEAD:"Our Core Values",ABOUTMESSAGE:"Gig Finder was founded in September 2016 by Ono @ Galvanize.\nThe purpose of Gig Finder is to allow you to find a gig near you.\nIf you are looking for some help to complete a gig or task, this website is also for you.",ABOUTONE:"Honesty",ABOUTTWO:"Trust",ABOUTTHREE:"Open Communication",TONE:"We believe that open communication and honesty is key to success.",TTWO:"We believe that you can count on someone to help you accomplish a task.",TTHREE:"Communication is key...Talk to each other and accomplish something great.",GETSTARTED:"Get Started",WHO:"Are you?",POSTER:"Looking for help",SEEKER:"Looking for a gig",WELCOMEPOSTER:"Welcome, Gig Poster",WELCOMESEEKER:"Welcome, Gig Seeker",POSTGIG:"Post a gig!",BROWSEPROF:"Browse Profiles",CHAT:"Chat now!",POSTPROF:"Post Your Profile!",BROWSEGIGS:"Search for Gigs!",SEEKERLUCK:"Good luck finding a gig!",CHATWELCOME:"Join the conversation!",CHATTYPINGHERE:"Type here...",SCROLL:"Scroll down to start",PICKNICK:"Pick a nickname...",GIGSAVAL:"Available Gigs: ",GIGLOC:"Gig Location: ",GIGAMT:"Gig Amount: ",REPLYTO:"Gig Reply email: ",GIGDESC:"Gig Description: ",GIGLANG:"Preferred Languages: ",SIGNUPMESS:"Signup for a free account",HAVE:"Have an account already? Log In ",HERE:"here",LOGIN:"Login with your account",NEED:"Need an account? Sign up for free ",HOME:" Home",ABOUT:"About",MY:"My Account",USERNAME:"Username",PASSWORD:"Password",EMAIL:"E-Mail",ZIPCODE:"Zip Code",SUBMIT:"Create Account!",INCORRECT:"Password is incorrect!",FIRST:"First Name",LAST:"Last Name",POSTEDBY:"Posted By: ",LOC:"Location: ",SUM:"Summary of Skills: ",LANGUAGES:"Languages: ",POSTEDON:"Posted on: ",REPLYPROF:"Contact ",PHONE:"Phone Number",PROFSAVAL:"Gig seekers profiles: ",CHATLOG:"Welcome to the Chat, "}),e.translations("es",{HEADLINE:"Bienvenidos A La Página Inicial",COPYRIGHT:"Derechos Reservados © GigFinder 2016",ABOUTHEAD:"Acerca de Gig Finder",ABOUTSUBHEAD:"Nuestros Valores Fundamentales",ABOUTMESSAGE:"Gig Finder fue establecido en Septiembre del 2016 por Ono en Galvanize. El Proposito de Gig Finder es proveer al publico con opciones de trabajo.",ABOUTONE:"Honestidad",ABOUTTWO:"Dependencia",ABOUTTHREE:"Comunicación abierta",TONE:"Creemos que la honestidad es clave para el exito mutuo.",TTWO:"Creemos que puedes contar con gente de confianza para ayudarte a cumplir tu labor.",TTHREE:"La comunicación es clave...hablen con mas personas para ayudarse los unos a los otros.",GETSTARTED:"Comenzar",WHO:"¿Quién eres?",POSTER:"Busco ayuda",SEEKER:"Busco un trabajo",WELCOMEPOSTER:"Bienvenido!",WELCOMESEEKER:"Bienvenido Buscador de trabajo",POSTGIG:"Publica trabajo",BROWSEPROF:"Navega los perfiles!",CHAT:"Entra a la sala de chat!",POSTPROF:"Publica tu perfil!",BROWSEGIGS:"Busca trabajos!",SEEKERLUCK:"Suerte encontrando un trabajo!",CHATWELCOME:"Únete a la conversación!",CHATTYPINGHERE:"Escriba aqui...",PICKNICK:"Elige un nombre de usuario para ingresar!",GIGSAVAL:"Trabajos disponibles: ",GIGLOC:"Ubicación del trabajo: ",GIGAMT:"Recompensa: ",REPLYTO:"Responder al correo electrónico: ",GIGDESC:"Descripción del trabajo: ",GIGLANG:"Lenguages preferidos: ",SIGNUPMESS:"Suscríbete gratuitamente",HAVE:"¿Ya tienes una cuenta? Ingresa ",HERE:"aquí",LOGIN:"Ingresa con tu cuenta",NEED:"¿Necesitas una cuenta? Crea una cuenta gratis ",HOME:" Inicio",ABOUT:"Acerca de Gig Finder",MY:"Mi Cuenta",USERNAME:"Nombre de usuario",PASSWORD:"Contraseña",EMAIL:"Correo electrónico",ZIPCODE:"Código postal",SUBMIT:"Crear cuenta!",INCORRECT:"Contraseña incorrecta!",FIRST:"Primer Nombre",LAST:"Apellido",POSTEDBY:"Publicado por: ",LOC:"Ubicación: ",SUM:"Resumen de habilidades: ",LANGUAGES:"Lenguages: ",POSTEDON:"Publicado el: ",REPLYPROF:"Contacto ",PHONE:"Número de teléfono",PROFSAVAL:"Algunos perfiles: ",CHATLOG:"Bienvenido al chat, ",SCROLL:"Desplazar hacia abajo para comenzar"}),e.useLoader("asyncLoader"),e.preferredLanguage("en"),e.useCookieStorage(),e.useLocalStorage()}]),app.factory("asyncLoader",function(e,o){return function(t){var n,s=e.defer();return n="en"===t.key?translationsEN:translationsES,o(function(){s.resolve(n)},0),s.promise}}),app.controller("AboutControl",["$scope",function(e){e.about={}}]),app.controller("ChatRoomControl",["$scope","$rootScope","$http","socket",function(e,o,t,n){e.chat={},$(function(){function e(e){var o="";1===e.numUsers?o+="1 participant online":o+=e.numUsers+" participants online",s(o)}function o(){(m=u(C.val().trim()))&&(G.fadeOut(),P.show(),G.off("click"),R=T.focus(),n.emit("add user",m))}function t(){var e=T.val();(e=u(e))&&A&&(T.val(""),a({username:m,message:e}),n.emit("new message",e))}function s(e,o){c($("<li>").addClass("log").text(e),o)}function a(e,o){var t=p(e);o=o||{},0!==t.length&&(o.fade=!1,t.remove());var n=$('<span class="username"/>').text(e.username).css("color",g(e.username)),s=$('<span class="messageBody">').text(e.message),a=e.typing?"typing":"";c($('<li class="message"/>').data("username",e.username).addClass(a).append(n,s),o)}function r(e){e.typing=!0,e.message="is typing...",a(e)}function i(e){p(e).fadeOut(function(){$(this).remove()})}function c(e,o){var t=$(e);o||(o={}),void 0===o.fade&&(o.fade=!0),void 0===o.prepend&&(o.prepend=!1),o.fade&&t.hide().fadeIn(h),o.prepend?O.prepend(t):O.append(t),O[0].scrollTop=O[0].scrollHeight}function u(e){return $("<div/>").text(e).text()}function l(){A&&(L||(L=!0,n.emit("typing")),d=(new Date).getTime(),setTimeout(function(){(new Date).getTime()-d>=E&&L&&(n.emit("stop typing"),L=!1)},E))}function p(e){return $(".typing.message").filter(function(o){return $(this).data("username")===e.username})}function g(e){for(var o=7,t=0;t<e.length;t++)o=e.charCodeAt(t)+(o<<5)-o;var n=Math.abs(o%f.length);return f[n]}var m,d,h=150,E=400,f=["#59110a","#91580f","#f8a700","#f78b00","#58dc00","#287b00","#a8f07a","#4ae8c4","#192a44","#3824aa","#a700ff","#d300e7"],S=$(window),C=$(".usernameInput"),O=$(".messages"),T=$(".inputMessage"),G=$(".login.page"),P=$(".chat.page"),A=!1,L=!1,R=C.focus();S.keydown(function(e){e.ctrlKey||e.metaKey||e.altKey||R.focus(),13===e.which&&(m?(t(),n.emit("stop typing"),L=!1):o())}),T.on("input",function(){l()}),G.click(function(){R.focus()}),T.click(function(){T.focus()}),n.on("login",function(o){A=!0,s("Welcome to Gig Finder's Chat Room, "+m+"!",{prepend:!0}),e(o)}),n.on("new message",function(e){a(e)}),n.on("user joined",function(o){s(o.username+" joined"),e(o)}),n.on("user left",function(o){s(o.username+" left"),e(o),i(o)}),n.on("typing",function(e){r(e)}),n.on("stop typing",function(e){i(e)})})}]),app.controller("PosterControl",["$scope","$timeout","$mdSidenav","$http",function(e,o,t,n){e.poster={},e.poster.greeting="Welcome, Gig Poster!",e.poster.showForm=!1,e.poster.showList=!1,e.poster.showChat=!1,e.poster.newPostVisible=!1,e.show=function(o){"gig"===o?e.poster.showForm=!e.poster.showForm:"list"===o?e.poster.showList=!e.poster.showList:e.poster.showChat=!e.poster.showChat},n({method:"GET",url:"/gig_seekers"}).then(function(o){e.poster.results=o.data}),e.postGig=function(o){n.post("/gig_posters/post",o).then(function(o){e.poster.postResults=o.data}),e.poster.newPostVisible=!1,e.newPost={},e.poster.showForm=!e.poster.showForm,e.postForm.$setPristine(),e.postForm.$setUntouched()},e.checkForError=function(e){return e.$invalid&&e.$touched}}]),app.controller("GigSeekerControl",["$scope","$http",function(e,o){e.seeker={},e.seeker.greeting="Hey there, gig seeker!",e.seeker.message="Good luck finding a gig!",e.poster={},e.poster.showEdit=!1,e.poster.newPostVisible=!1,e.show=function(o){"gigs"===o?e.poster.showGigs=!e.poster.showGigs:"chat"===o?e.poster.showChat=!e.poster.showChat:e.poster.showEdit=!e.poster.showEdit},o({method:"GET",url:"/gigs"}).then(function(o){e.poster.gigs=o.data}),e.postProfile=function(t){o.post("/gig_seekers/post",t).then(function(o){e.poster.postResults=o.data}),e.poster.newPostVisible=!1,e.newPost={},e.poster.showEdit=!e.poster.showEdit,e.postProfForm.$setPristine(),e.postProfForm.$setUntouched()},e.checkForError=function(e){return e.$invalid&&e.$touched}}]),app.controller("HomeControl",["$scope",function(e){e.home={},e.home.selectLanguage="Select Your Language",e.home.selectLanguageEs="Selecciona tu idioma"}]),app.controller("SignInControl",["$scope","$http","$location",function(e,o,t){e.signin={},e.master={},e.signin.signInMessage="Login with your account",e.signin.errorMessage=!1,e.signIn=function(n){o.post("/signin/post",n).then(function(o){e.signin.signInResults=o.data,t.url("/user")}).catch(function(o){e.signin.errorMessage=!0,e.user=angular.copy(e.master),e.signUpForm.$setPristine(),e.signUpForm.$setUntouched()})}}]),app.controller("SignUpControl",["$scope","$http","$location","$state",function(e,o,t,n){e.signup={},e.signup.signUpMessage="Signup for a free account",e.master={},e.signup.errorMessage=!1,e.signup.successMessage=!1,e.signUp=function(n){o.post("/signup/post",n).then(function(o){e.signup.signUpResults=o.data,e.signup.successMessage=!0,alert("Thank You for Signing Up"),t.url("signin")}).catch(function(o){e.signup.errorMessage=!0,e.newUser=angular.copy(e.master),e.signUpForm.$setPristine(),e.signUpForm.$setUntouched()})}}]),app.controller("TranslateControl",["$translate","$scope",function(e,o){o.changeLanguage=function(o){e.use(o)}}]),app.controller("UserControl",["$scope","$http","$location",function(e,o,t){e.user={},e.user.userMessage="Welcome to your page!"}]);